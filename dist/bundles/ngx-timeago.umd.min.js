!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/observable/of"),require("rxjs/observable/timer"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-timeago",["exports","@angular/core","rxjs","rxjs/observable/of","rxjs/observable/timer","rxjs/operators"],e):e(t["ngx-timeago"]={},t.ng.core,t.rxjs,t.Rx.Observable,t.Rx.Observable,t.Rx.Observable.prototype)}(this,function(t,e,s,r,n,a){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function o(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function u(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}function c(t){return null!=t}function p(t){return null!=t&&""+t!="false"}function l(t){var e=new Date(t);if(!Number.isNaN(e.valueOf()))return e;var r=String(t).match(/\d+/g);if(null===r||r.length<=2)return e;t=u(r.map(function(t){return parseInt(t,10)})),e=t[0],r=t[1],t=t.slice(2);return new Date(Date.UTC.apply(Date,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}([e,r-1],t)))}var h,f=3600,d=24*f,b=7*d,g=30*d,v=365*d,m=function(){},y=(o(x,h=m),x.prototype.tick=function(e){return r.of(0).pipe(a.expand(function(){var t=Date.now(),t=Math.round(Math.abs(t-e)/1e3),t=t<60?1e3:t<f?6e4:t<d?36e5:0;return t?n.timer(t):s.Observable.empty()}),a.skip(1))},x);function x(){return null!==h&&h.apply(this,arguments)||this}y.decorators=[{type:e.Injectable}];var k=function(){this.changes=new s.Subject};k.decorators=[{type:e.Injectable}];var S,C=function(t){var e=Date.now(),r=Math.round(Math.abs(e-t)/1e3),e=t<e?"ago":"from now",r=u(r<60?[Math.round(r),"second"]:r<f?[Math.round(r/60),"minute"]:r<d?[Math.round(r/f),"hour"]:r<b?[Math.round(r/d),"day"]:r<g?[Math.round(r/b),"week"]:r<v?[Math.round(r/g),"month"]:[Math.round(r/v),"year"],2);return{value:r[0],unit:r[1],suffix:e}},w=function(){},j=(o(O,S=w),O.prototype.format=function(t){var e=C(t),r=e.suffix,t=e.value,e=e.unit;return this.parse(t,e,r)},O.prototype.parse=function(t,e,r){return 1!==t&&(e+="s"),t+" "+e+" "+r},O);function O(){return null!==S&&S.apply(this,arguments)||this}j.decorators=[{type:e.Injectable}];var M,D=(o(_,M=w),_.prototype.format=function(t){var e=C(t),r=e.suffix,n=e.value,e=e.unit;return this.parse(n,e,r,Date.now(),t)},_.prototype.parse=function(t,e,r,n,i){"week"!==e||this.intl.strings.week||this.intl.strings.weeks||(t=Math.round(Math.abs(n-i)/864e5),e="day");n=this.normalizeFn(t,n-i,this.intl.strings.numbers),i=[];"ago"===r&&this.intl.strings.prefixAgo&&i.push(n(this.intl.strings.prefixAgo)),"from now"===r&&this.intl.strings.prefixFromNow&&i.push(n(this.intl.strings.prefixFromNow)),e=1<t?this.intl.strings[e+"s"]||this.intl.strings[e]||"%d "+e:this.intl.strings[e]||this.intl.strings[e+"s"]||"%d "+e,i.push(n(e)),"ago"===r&&this.intl.strings.suffixAgo&&i.push(n(this.intl.strings.suffixAgo)),"from now"===r&&this.intl.strings.suffixFromNow&&i.push(n(this.intl.strings.suffixFromNow));n="string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ";return i.join(n)},_.prototype.normalizeNumber=function(e,t){return e&&10===e.length?String(t).split("").map(function(t){return t.match(/^[0-9]$/)?e[parseInt(t,10)]:t}).join(""):String(t)},_.prototype.normalizeFn=function(e,r,n){var i=this;return function(t){return("function"==typeof t?t(e,r):t).replace(/%d/g,i.normalizeNumber(n,e))}},_);function _(t){var e=M.call(this)||this;return e.intl=t,e}D.decorators=[{type:e.Injectable}],D.ctorParameters=function(){return[{type:k}]};var T=(Object.defineProperty(F.prototype,"date",{get:function(){return this._date},set:function(t){var e=this;if(this._date=l(t).valueOf(),!this._date)throw new SyntaxError("Wrong parameter in TimeagoDirective. Expected a valid date, received: "+t);this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.clockSubscription=this.clock.tick(this.date).pipe(a.filter(function(){return e.live},this)).subscribe(function(){return e.stateChanges.next()})},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"live",{get:function(){return this._live},set:function(t){this._live=p(t)},enumerable:!0,configurable:!0}),F.prototype.ngOnChanges=function(){this.stateChanges.next()},F.prototype.setContent=function(t,e){c(t.textContent)?t.textContent=e:t.data=e},F.prototype.ngOnDestroy=function(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=undefined),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.stateChanges.complete()},F);function F(t,e,r,n,i){var o=this;this.cd=e,this.clock=i,this.stateChanges=new s.Subject,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(function(){return o.stateChanges.next()})),this.stateChanges.subscribe(function(){o.setContent(n.nativeElement,r.format(o.date)),o.cd.markForCheck()})}T.decorators=[{type:e.Directive,args:[{selector:"[timeago]",exportAs:"timeago"}]}],T.ctorParameters=function(){return[{type:k,decorators:[{type:e.Optional}]},{type:e.ChangeDetectorRef},{type:w},{type:e.ElementRef},{type:m}]},T.propDecorators={date:[{type:e.Input}],live:[{type:e.Input}]};var P=(I.prototype.transform=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=l(t).valueOf(),o=c(r[0])?p(r[0]):this.live;if(this.date===i&&this.live===o)return this.value;if(this.date=i,this.live=o,!this.date)throw new SyntaxError("Wrong parameter in TimeagoPipe. Expected a valid date, received: "+t);return this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.clockSubscription=this.clock.tick(this.date).pipe(a.filter(function(){return e.live},this)).subscribe(function(){return e.stateChanges.next()}),this.stateChanges.next(),this.value},I.prototype.ngOnDestroy=function(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=undefined),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.stateChanges.complete()},I);function I(t,e,r,n){var i=this;this.clock=n,this.live=!0,this.stateChanges=new s.Subject,t&&(this.intlSubscription=t.changes.subscribe(function(){return i.stateChanges.next()})),this.stateChanges.subscribe(function(){i.value=r.format(i.date),e.markForCheck()})}P.decorators=[{type:e.Injectable},{type:e.Pipe,args:[{name:"timeago",pure:!1}]}],P.ctorParameters=function(){return[{type:k,decorators:[{type:e.Optional}]},{type:e.ChangeDetectorRef},{type:w},{type:m}]};var N=(R.forRoot=function(t){return{ngModule:R,providers:[(t=void 0===t?{}:t).clock||{provide:m,useClass:y},t.intl||[],t.formatter||{provide:w,useClass:j}]}},R.forChild=function(t){return{ngModule:R,providers:[(t=void 0===t?{}:t).clock||{provide:m,useClass:y},t.intl||[],t.formatter||{provide:w,useClass:j}]}},R);function R(){}N.decorators=[{type:e.NgModule,args:[{declarations:[T,P],exports:[T,P]}]}],t.TimeagoDirective=T,t.TimeagoPipe=P,t.TimeagoIntl=k,t.TimeagoClock=m,t.TimeagoDefaultClock=y,t.TimeagoFormatter=w,t.TimeagoDefaultFormatter=j,t.TimeagoCustomFormatter=D,t.TimeagoModule=N,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-timeago.umd.min.js.map
